import React, { Component } from 'react';
import PropTypes from 'prop-types';

function styleInject(css, ref) {
  if ( ref === void 0 ) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') { return; }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css = "/* add css styles here (optional) */\n* {\n  margin: 0;\n  padding: 0; }\n\n.audio-player-wrap {\n  width: 96%;\n  margin: 0 auto; }\n  .audio-player-wrap audio {\n    max-width: 100%;\n    max-height: 80px; }\n  .audio-player-wrap .player-body {\n    display: table;\n    background-color: #ffffff;\n    box-shadow: 0px 0px 16px 4px rgba(46, 45, 45, 0.14);\n    border-radius: 10px;\n    padding: 8px 16px; }\n  .audio-player-wrap .body-left, .audio-player-wrap .body-right {\n    display: table-cell; }\n  .audio-player-wrap .body-left {\n    width: 42px;\n    height: 100%;\n    vertical-align: middle; }\n    .audio-player-wrap .body-left img {\n      width: 50px;\n      height: 50px;\n      border-radius: 50px; }\n  .audio-player-wrap .body-right {\n    width: 100%;\n    padding-left: 18px;\n    vertical-align: middle;\n    height: 80px; }\n  .audio-player-wrap .audio-title {\n    font-size: 16px;\n    font-weight: 400;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .audio-player-wrap .audio-subtitle {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: 12px;\n    color: #8c8c8c; }\n  .audio-player-wrap .audio-time-and-controls {\n    font-size: 12px;\n    color: #8c8c8c; }\n    .audio-player-wrap .audio-time-and-controls .current-time {\n      float: left; }\n    .audio-player-wrap .audio-time-and-controls .duration-time {\n      float: right; }\n  .audio-player-wrap .audio-progress-bar-wrap {\n    height: 2px;\n    width: calc(100% - 4px);\n    position: relative;\n    margin: 12px 0; }\n    .audio-player-wrap .audio-progress-bar-wrap .progress-bar-detail {\n      height: 100%;\n      width: 100%;\n      background: #ebebeb;\n      position: relative;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      user-select: none; }\n    .audio-player-wrap .audio-progress-bar-wrap .progress-bar-current {\n      width: 0%;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      overflow: hidden;\n      background: #09bb07;\n      z-index: 2; }\n    .audio-player-wrap .audio-progress-bar-wrap .progress-bar-drag-point {\n      width: 6px;\n      height: 6px;\n      margin-top: -3px;\n      margin-left: 0;\n      border-radius: 50%;\n      background-color: #09bb07;\n      position: absolute;\n      left: 0;\n      top: 50%;\n      z-index: 2; }\n      .audio-player-wrap .audio-progress-bar-wrap .progress-bar-drag-point::before {\n        content: \" \";\n        display: block;\n        position: absolute;\n        width: 24px;\n        height: 24px;\n        border-radius: 50%;\n        background: radial-gradient(rgba(9, 187, 7, 0.3) 20%, rgba(0, 0, 0, 0) 40%);\n        top: 50%;\n        margin-top: -12px;\n        margin-left: -9px;\n        cursor: pointer;\n        outline: 0;\n        -webkit-tap-highlight-color: transparent; }\n";
styleInject(css);

var Util = {
  timeFormat: function timeFormat(seconds) {
    var ss = parseInt(seconds); // 秒     
    var mm = 0; // 分        
    var hh = 0; // 小时        
    if (ss > 60) {
      mm = parseInt(ss / 60);
      ss = parseInt(ss % 60);
    }
    if (mm > 60) {
      hh = parseInt(mm / 60);
      mm = parseInt(mm % 60);
    }
    var result = ('00' + parseInt(ss)).slice(-2);
    if (mm > 0) {
      result = ('00' + parseInt(mm)).slice(-2) + ':' + result;
    } else {
      result = '00:' + result;
    }
    if (hh > 0) {
      result = ('00' + parseInt(hh)).slice(-2) + ':' + result;
    }

    return result;
  }
};

var img = new Image();img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAMAAAArteDzAAAAaVBMVEUAAAAarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRkarRlIa6J1AAAAInRSTlMA9wYa38QR7ZJnMK1IIqBsO3fXDbSGQudZz5fKpV0rfbpRlHIjYQAAA35JREFUWMPFWduyqjAMDS0tgtwEFBGv/P9Hntmh3cWDTYsMs/Oio3SRy0qapuCU7PXIRdUGQxCFncgfrwzWCb/l4TCTML/xbxFlIQariEJ+AZnkwUBKkCdLIZvBQ5olsPw61Uhc4vTOa4Ca39P4IqYWXH2dyw5mWXUs2ez/8liZVx6YD2bW6wXRzmpesov0U70HxW5azTBmpD1xqJW9uUzfaS0Lp1ms0Nru6Nfv9WPSi8lahT2BKoWyvARPKZUPhLRiduq9ckHaKds6y5pa6XmARXJQutaEP4MzLJTzyJfmk193I2YKiyUdUXcf+OnCdKPO+JqNvxO2kx4YNcr+c2jvjpE7Wv27W4uRS/C1jFEu3mpdhJyX34PWISY3ByNj/SxhhZRjfZ0UMkUJt3Bxx08rJU2xbFB16YEZDiG3JSy6sHlXNPbCHIbOVpHiN1VzjBLzKOCkmxjGKld6B4oNbjkiqi3rkJeBNN8jBj7SUEaxyGgnjE1OkS0mHkUAgd5X/qWF80mWR7PaOY0410GrnHHXVHpSqlZII521RzeXqtpkTkgEEitIiwF1YeLDJgQnIldbgAx5wMBj5z4br+aWB5GdGbxUxGjUp6ESLmxhJsaMFzx+Pi5+VIpN6bTUlcvPfw/InXlvjO5MjsdE/ucg6DjxRlEJY4Wb0J1IlnR0ZoXGEHF/6l1I68d+vj3ho9xH0mO+cjumNiMxvg/tTOWYcIAkqCl+XjRbtH7CHv4aCQrIQIui3TCxNPyN1BMXfhQFFxCgJ/yzmYAaTpGgEZpPoOq60GJctfkRaX5IBApRVTNTm/TvnYHqCEoh6kMzUCuNxnUUpVzkB/2+/Pc5iTpT5PdNUx78FrMT6kymqbugmEpxNZU4JXaph7v0GbOGxJQ3SZU+ryINSWT8iAt6skg7txPD1wCJN/rrQG0nZuNzo54nHQOnNj6zRTtRj5Pe5klu0d7NBGTThvFENhNE20NQS5BtD9GgUdQqyQZtaSuZ4bIr1fUGcmHTCz1SRpJNL9GeE3xNHe35/CDhRj04DhLzI48b9eI48mxxONvyGLn+wGtsLTY5mm87RFg/7jhNxh3bD2aANWtHSFsOu7Yfy60fIG4/6lw/lN14fOwedJdWXxKD7m1H8u7LAwZMZsn88mCDa46/v5DZ6OoIhcf7dg7Y7mPalb7XcVEwDEFU+V3H/QOplcP+ctPpgwAAAABJRU5ErkJggg==';

var img$1 = new Image();img$1.src = 'data:image/gif;base64,R0lGODlhVABUAPfJAButGiKwIe747m7Kbe/47/r8+vj7+J3bnB+vHqDcny20LByuG+j16Pz9/HvPeiOwIk/ATuT05FLBUTa3Np7bnTm4OCqzKdXv1ff79ySwI8Lowi+1Lj66Pb3mvdvx23nPeaTepMjqyLXktVzEW63hrTW2NEu+So7WjdLu0j66PrzmvKrgqn7QfeL04p/cnkm+SCiyJ7/nvmTHYyGwIPn8+fX69d7y3vb69iWxJE2/TPL58iuzKqzgrHjOeEW8RPT69PH58ZXYlNDtz4bThSyzK+337eb15mLGYdbv1mnJaW/Lb8bqxja3NeX15V3FXPD48GHGYfP689fw11HAUHzQe3fOd0q+STi4N8rrytPu01/FXz25PGzKa17FXez37CCvH6ngqaDcoOn26ODz3x6vHZLXkiaxJef150y/S+Hz4NDt0E/AT77nvrTjtJfZlnrPeje3N0K7QWvKaoXThLvmu8fqxmXHZIPSg5bZlavgq8/tz9zx3JzbnI/WjtHu0Ue9RkS8Q93y3ZTYk6LdovH58FfDV2DGYInUiX3QfIfThmfIZtnw2Dq4OZDXkLrlulDAUIzVi43VjG/LbsPpw/n7+XTNc1TBUx6uHcDnv3DLcDG1MN/y31/FXsjqx2jJaFPBUi60LS60LljDWHXNdGbIZTS2M6/hrnfOdke9R9Tv1FbCVWPHYkC6P1rEWbDir0a8RVXCVMnryYvVi4jUiMHowVnDWMvry+v36zO2Mqjfpx2uHGfIZyeyJsDowLHisZHXkZPYk7nluXbNddnw2fv8+4fUhzC1LxqtGf39/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4NzEyYzBkMi03NGJlLTQ5MTEtYmQyMi1lNmI4ZTlhZmQ5ZGIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkUzMTAyRkEyMjg0MTFFN0JDNzBCMEY5NjNCMDhDQjQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkUzMTAyRjkyMjg0MTFFN0JDNzBCMEY5NjNCMDhDQjQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzEyYzBkMi03NGJlLTQ5MTEtYmQyMi1lNmI4ZTlhZmQ5ZGIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODcxMmMwZDItNzRiZS00OTExLWJkMjItZTZiOGU5YWZkOWRiIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJ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';

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};

var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};

var OAudioPlayer = function (_Component) {
  inherits(OAudioPlayer, _Component);

  function OAudioPlayer(props) {
    classCallCheck(this, OAudioPlayer);

    var _this = possibleConstructorReturn(this, (OAudioPlayer.__proto__ || Object.getPrototypeOf(OAudioPlayer)).call(this, props));

    _this.state = {
      currentTime: "00:00",
      duration: "00:00",
      currentTimeNum: 0,
      durationNum: 1, // 0 不能为除数，故设为1
      bufferedPercent: 0,
      playSrc: img.src
    };

    _this.audioPlayPause = function () {
      var self = _this.audioPlayerRef.current;
      console.log("duration:" + self.duration);
      if (self.paused) {
        console.log("play()");
        self.play();
      } else {
        console.log("pause()");
        self.pause();
      }
    };

    _this.canplayHandle = function () {
      _this.setState({
        durationNum: _this.audioPlayerRef.current.duration,
        duration: Util.timeFormat(_this.audioPlayerRef.current.duration)
      });
    };

    _this.timeUpdateHandle = function () {
      var audioPlayer = _this.audioPlayerRef.current;
      var ct = audioPlayer.currentTime;
      var dt = audioPlayer.duration;
      if (ct <= dt) {
        _this.setState({
          currentTimeNum: ct,
          currentTime: Util.timeFormat(ct)
        });
      }

      // 动态
      if (audioPlayer.paused) {
        _this.setState({
          playSrc: _this.props.pauseIcon
        });
      } else {
        _this.setState({
          playSrc: _this.props.playingIcon
        });
      }
    };

    _this.progressBarClickHandle = function (e) {
      var ev = e.nativeEvent;
      var offset = ev.layerX || ev.offsetX;
      var progressBarDetail = _this.progressBarDetailRef.current;
      var barWidth = progressBarDetail.offsetWidth;
      var curTime = offset / barWidth * _this.state.durationNum;
      _this.setState({
        currentTimeNum: curTime,
        currentTime: Util.timeFormat(curTime)
      });
      // 设置当前播放时间
      _this.audioPlayerRef.current.currentTime = curTime;
    };

    _this.audioPlayerRef = React.createRef();
    _this.progressBarDetailRef = React.createRef();
    return _this;
  }

  createClass(OAudioPlayer, [{
    key: 'componentDidMount',
    value: function componentDidMount() {}
    /******* TODO，进度条拖动
    dragPoint.addEventListener('touchstart', (e) => this.dragStart(e), false);
    dragPoint.addEventListener('touchmove', (e) => this.dragMove(e), false);
    dragPoint.addEventListener('touchend', (e) => this.dragEnd(e), false);
    //拖动开始时，可以暂停播放。拖动时计算currentTime。拖动结束继续播放,注意暂停和继续播放时间不能太短，否则报错
    */


    // 播放或暂停

  }, {
    key: 'audioPlay',


    // 播放
    value: function audioPlay() {
      var self = this.audioPlayerRef.current;
      self.play();
    }

    // 暂停

  }, {
    key: 'audioPause',
    value: function audioPause() {
      var self = this.audioPlayerRef.current;
      self.pause();
    }

    // 音频可以播放时，此时可以获取到视频的时长


    // currentTime 当前播放位置（以秒计）变化时触发

  }, {
    key: 'render',
    value: function render() {
      var _props = this.props,
          url = _props.url,
          title = _props.title,
          subtitle = _props.subtitle,
          loop = _props.loop,
          onPlaying = _props.onPlaying,
          onPause = _props.onPause,
          preload = _props.preload,
          autoplay = _props.autoplay;
      var _state = this.state,
          duration = _state.duration,
          currentTime = _state.currentTime,
          durationNum = _state.durationNum,
          currentTimeNum = _state.currentTimeNum,
          bufferedPercent = _state.bufferedPercent,
          playSrc = _state.playSrc;

      return React.createElement(
        'div',
        { className: 'audio-player-wrap' },
        React.createElement('audio', { className: 'wx-audio-content',
          ref: this.audioPlayerRef,
          preload: preload,
          autoPlay: autoplay,
          onPlaying: onPlaying,
          onPause: onPause,
          onCanPlay: this.canplayHandle,
          onTimeUpdate: this.timeUpdateHandle,
          src: url,
          loop: loop }),
        React.createElement(
          'div',
          { className: 'player-body' },
          React.createElement(
            'div',
            { className: 'body-left' },
            React.createElement('img', { onClick: this.audioPlayPause, className: 'wx-audio-state', src: playSrc })
          ),
          React.createElement(
            'div',
            { className: 'body-right' },
            React.createElement(
              'p',
              { className: 'audio-title' },
              title
            ),
            React.createElement(
              'p',
              { className: 'audio-subtitle' },
              subtitle
            ),
            React.createElement(
              'div',
              { className: 'audio-progress-bar-wrap' },
              React.createElement(
                'div',
                { className: 'progress-bar-detail',
                  onClick: this.progressBarClickHandle,
                  ref: this.progressBarDetailRef },
                React.createElement('div', { className: 'progress-bar-buffer', style: { width: bufferedPercent + '%' } }),
                React.createElement('div', { className: 'progress-bar-current', style: { width: 'calc((' + currentTimeNum + '/' + durationNum + ')*100%)' } }),
                React.createElement(
                  'span',
                  { className: 'progress-bar-loading' },
                  React.createElement('span', { className: 'loading-line' })
                )
              ),
              React.createElement('div', { className: 'progress-bar-drag-point', style: { left: 'calc((' + currentTimeNum + '/' + durationNum + ')*100%)' } })
            ),
            React.createElement(
              'div',
              { className: 'audio-time-and-controls' },
              React.createElement(
                'span',
                { className: 'current-time' },
                currentTime
              ),
              React.createElement(
                'span',
                { className: 'duration-time' },
                duration
              )
            )
          )
        ),
        React.createElement('div', { className: 'player-list' })
      );
    }
  }]);
  return OAudioPlayer;
}(Component);

OAudioPlayer.defaultProps = {
  onPlaying: function onPlaying() {},
  onPause: function onPause() {},
  autoplay: false,
  loop: false,
  preload: 'metadata',
  pauseIcon: img.src,
  playingIcon: img$1.src
};
OAudioPlayer.propTypes = {
  autoplay: PropTypes.bool, // 是否自动播放
  loop: PropTypes.bool, // 是否循环播放
  muted: PropTypes.bool, // 是否静音，默认为false，表示有声音

  // autoplay 属性优先于 preload 假如用户想自动播放视频，那么很明显浏览器需要下载视频。
  preload: PropTypes.string, // 加载方式 none 不缓存，metadata 获取元数据 (例如音频长度) auto 预加载
  volume: PropTypes.string, //音频播放的音量。值从0.0 (无声) 到 1.0 (最大声).
  url: PropTypes.string, //src属性，可用source标签替代

  title: PropTypes.string,
  subtitle: PropTypes.string,
  pauseIcon: PropTypes.string,
  playingIcon: PropTypes.string,
  // 事件
  onPlaying: PropTypes.func, // 在媒体开始播放时触发（不论是初次播放、在暂停后恢复、或是在结束后重新开始）
  onPause: PropTypes.func // 当音频/视频已暂停时

};

export default OAudioPlayer;
//# sourceMappingURL=index.es.js.map
